(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1188:(e,t,s)=>{Promise.resolve().then(s.bind(s,6326))},6326:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(5155);let r={arrow_icon:{src:"/_next/static/media/arrow_icon.40924ca8.svg",height:16,width:14,blurWidth:0,blurHeight:0},arrow_icon_dull:{src:"/_next/static/media/arrow_icon_dull.522c3682.svg",height:16,width:14,blurWidth:0,blurHeight:0},logo_text:{src:"/_next/static/media/logo_text.f5e50aae.svg",height:210,width:1024,blurWidth:0,blurHeight:0},logo_icon:{src:"/_next/static/media/logo_icon.f5e50aae.svg",height:210,width:1024,blurWidth:0,blurHeight:0},menu_icon:{src:"/_next/static/media/menu_icon.65bd12bf.svg",height:28,width:28,blurWidth:0,blurHeight:0},search_icon:{src:"/_next/static/media/search_icon.d1a5bb27.svg",height:20,width:20,blurWidth:0,blurHeight:0},profile_icon:{src:"/_next/static/media/profile_icon.ff048d9f.svg",height:35,width:34,blurWidth:0,blurHeight:0},copy_icon:{src:"/_next/static/media/copy_icon.71757383.svg",height:20,width:20,blurWidth:0,blurHeight:0},deepthink_icon:{src:"/_next/static/media/deepthink_icon.095dab79.svg",height:1024,width:1024,blurWidth:0,blurHeight:0},chat_icon:{src:"/_next/static/media/chat_icon.80169053.svg",height:30,width:30,blurWidth:0,blurHeight:0},dislike_icon:{src:"/_next/static/media/dislike_icon.d3d7e32f.svg",height:20,width:20,blurWidth:0,blurHeight:0},like_icon:{src:"/_next/static/media/like_icon.419a2bad.svg",height:18,width:18,blurWidth:0,blurHeight:0},phone_icon:{src:"/_next/static/media/phone_icon.e7e55097.svg",height:30,width:30,blurWidth:0,blurHeight:0},phone_icon_dull:{src:"/_next/static/media/phone_icon_dull.85f7b500.svg",height:30,width:30,blurWidth:0,blurHeight:0},pencil_icon:{src:"/_next/static/media/pencil_icon.f7517f65.svg",height:20,width:20,blurWidth:0,blurHeight:0},delete_icon:{src:"/_next/static/media/delete_icon.0a63255b.svg",height:23,width:23,blurWidth:0,blurHeight:0},pin_icon:{src:"/_next/static/media/pin_icon.ddd35422.svg",height:20,width:14,blurWidth:0,blurHeight:0},regenerate_icon:{src:"/_next/static/media/regenerate_icon.89e3e7df.svg",height:20,width:20,blurWidth:0,blurHeight:0},sidebar_icon:{src:"/_next/static/media/sidebar_icon.89ff28b6.svg",height:30,width:30,blurWidth:0,blurHeight:0},sidebar_close_icon:{src:"/_next/static/media/sidebar_close_icon.2b7ad353.svg",height:30,width:30,blurWidth:0,blurHeight:0},chat_icon_dull:{src:"/_next/static/media/chat_icon_dull.4d932da5.svg",height:30,width:30,blurWidth:0,blurHeight:0},qrcode:{src:"/_next/static/media/qrcode.b1adbcc7.png",height:225,width:225,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAATlBMVEX3+Pbtm8rsp9LsueHowObm2PfXtfb18/X33+rv4Pfxsdb35/LlzvTWo+rcwfbw3Ovu1vDSZ7/jtuXRe9ns3vH3x+DQnuPDcMrgwPDeue5WKCJ5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQUlEQVR4nB3GSRLAIAgEwEGIiLuY5f8/TSV9agAYcqpCS1i7dUMiLtPigUSZvX3Jgd36H/EaK9JF67lNoTpkAngBTcACN6mRPWoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},three_dots:{src:"/_next/static/media/three_dots.a66f8b3d.svg",height:24,width:24,blurWidth:0,blurHeight:0},new_icon:{src:"/_next/static/media/new_icon.17cea5ca.svg",height:16,width:36,blurWidth:0,blurHeight:0}};var i=s(5239),l=s(2115),c=s(856),n=s(228),o=s.n(n),d=s(2663);let h=e=>{let{role:t,content:s}=e;(0,l.useEffect)(()=>{o().highlightAll()},[s]);let n=()=>{navigator.clipboard.writeText(s),d.Ay.success("Message copied to clipboard")};return(0,a.jsx)("div",{className:"flex flex-col items-center w-full max-w-3xl text-sm",children:(0,a.jsx)("div",{className:"flex flex-col  w-full mb-8 ".concat("user"===t&&"items-end"),children:(0,a.jsxs)("div",{className:"group relative flex max-w-2xl py-3 rounded-xl ".concat("user"===t?"bg-[#414158] px-5":"gap-3"),children:[(0,a.jsx)("div",{className:"opacity-0 group-hover:opacity-100 absolute ".concat("user"===t?"-left-16 top-2.5":"left-9 -bottom-6"," transition-all"),children:(0,a.jsx)("div",{className:"flex items-center gap-2 opacity-70",children:"user"===t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{onClick:n,src:r.copy_icon,alt:"",className:"w-4 cursor-pointer"}),(0,a.jsx)(i.default,{src:r.pencil_icon,alt:"",className:"w-4.5 cursor-pointer"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{onClick:n,src:r.copy_icon,alt:"",className:"w-4.5 cursor-pointer"}),(0,a.jsx)(i.default,{src:r.regenerate_icon,alt:"",className:"w-4 cursor-pointer"}),(0,a.jsx)(i.default,{src:r.like_icon,alt:"",className:"w-4 cursor-pointer"}),(0,a.jsx)(i.default,{src:r.dislike_icon,alt:"",className:"w-4 cursor-pointer"})]})})}),"user"===t?(0,a.jsx)("span",{className:"text-white/90",children:s}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.default,{src:r.logo_icon,alt:"",className:"h-9 w-9 p-1 border border-white/15 rounded-full"}),(0,a.jsx)("div",{className:"space-y-4 w-full overflow-scroll",children:(0,a.jsx)(c.oz,{children:s})})]})]})})})};var u=s(9111),m=s(5125);let g=e=>{let{setIsLoading:t,isLoading:s}=e,[c,n]=(0,l.useState)(""),{user:o,chats:h,setChats:g,selectedChat:x,setSelectedChat:p}=(0,u.U)(),b=async e=>{try{if(e.preventDefault(),!o)return d.Ay.error("Login to send message");if(s)return d.Ay.error("Wait for the previous prompt response");t(!0),n("");let a={role:"user",content:c,timestamp:Date.now()};g(e=>e.map(e=>e._id===x._id?{...e,messages:[...e.messages,a]}:e)),p(e=>({...e,messages:[...e.messages,a]}));let{data:r}=await m.A.post("/api/chat/ai",{chatId:x._id,prompt:c});if(r.success){g(e=>e.map(e=>e._id===x._id?{...e,messages:[...e.messages,r.data]}:e));let e=r.data.content.split(" "),t={role:"assistant",content:"",timestamp:Date.now()};p(e=>({...e,messages:[...e.messages,t]}));for(let s=0;s<e.length;s++)setTimeout(()=>{t.content=e.slice(0,s+1).join(" "),p(e=>{let s=[...e.messages.slice(0,-1),t];return{...e,messages:s}})},100*s)}else d.Ay.error(r.message),n(c)}catch(e){d.Ay.error(e.message),n(c)}finally{t(!1)}};return(0,a.jsxs)("form",{onSubmit:b,className:"w-full ".concat((null==x?void 0:x.messages.length)>0?"max-w-3xl":"max-w-2xl"," bg-[#404045] p-4 rounded-3xl mt-4 transition-all"),children:[(0,a.jsx)("textarea",{onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),b(e))},className:"outline-none w-full resize-none overflow-hidden break-words bg-transparent",rows:2,placeholder:"Message DeepSeek",required:!0,onChange:e=>n(e.target.value),value:c}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2 text-xs border border-gray-300/40 px-2 py-1 rounded-full cursor-pointer hover:bg-gray-500/20 transition",children:[(0,a.jsx)(i.default,{className:"h-5",src:r.deepthink_icon,alt:""}),"DeepThink (R1)"]}),(0,a.jsxs)("p",{className:"flex items-center gap-2 text-xs border border-gray-300/40 px-2 py-1 rounded-full cursor-pointer hover:bg-gray-500/20 transition",children:[(0,a.jsx)(i.default,{className:"h-5",src:r.search_icon,alt:""}),"Search"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i.default,{className:"w-4 cursor-pointer",src:r.pin_icon,alt:""}),(0,a.jsx)("button",{className:"".concat(c?"bg-primary":"bg-[#71717a]"," rounded-full p-2 cursor-pointer"),children:(0,a.jsx)(i.default,{className:"w-3.5 aspect-square",src:c?r.arrow_icon:r.arrow_icon_dull,alt:""})})]})]})]})};var x=s(4511);let p=e=>{let{openMenu:t,setOpenMenu:s,id:l,name:c}=e,{fetchUsersChats:n,chats:o,setSelectedChat:h}=(0,u.U)(),g=async()=>{try{let e=prompt("Enter new name");if(!e)return;let{data:t}=await m.A.post("/api/chat/rename",{chatId:l,name:e});t.success?(n(),s({id:0,open:!1}),d.Ay.success(t.message)):d.Ay.error(t.message)}catch(e){d.Ay.error(e.message)}},x=async()=>{try{if(!window.confirm("Are you sure you want to delete this chat?"))return;let{data:e}=await m.A.post("/api/chat/delete",{chatId:l});e.success?(n(),s({id:0,open:!1}),d.Ay.success(e.message)):d.Ay.error(e.message)}catch(e){d.Ay.error(e.message)}};return(0,a.jsxs)("div",{onClick:()=>{let e=o.find(e=>e._id===l);h(e),console.log(e)},className:"flex items-center justify-between p-2 text-white/80 hover:bg-white/10 rounded-lg text-sm group cursor-pointer",children:[(0,a.jsx)("p",{className:"group-hover:max-w-5/6 truncate",children:c}),(0,a.jsxs)("div",{onClick:e=>{e.stopPropagation(),s({id:l,open:!t.open})},className:"group relative flex items-center justify-center h-6 w-6 aspect-square hover:bg-black/80 rounded-lg",children:[(0,a.jsx)(i.default,{src:r.three_dots,alt:"",className:"w-4 ".concat(t.id===l&&t.open?"":"hidden"," group-hover:block")}),(0,a.jsxs)("div",{className:"absolute ".concat(t.id===l&&t.open?"block":"hidden"," -right-36 top-6 bg-gray-700 rounded-xl w-max p-2"),children:[(0,a.jsxs)("div",{onClick:g,className:"flex items-center gap-3 hover:bg-white/10 px-3 py-2 rounded-lg",children:[(0,a.jsx)(i.default,{src:r.pencil_icon,alt:"",className:"w-4"}),(0,a.jsx)("p",{children:"Rename"})]}),(0,a.jsxs)("div",{onClick:x,className:"flex items-center gap-3 hover:bg-white/10 px-3 py-2 rounded-lg",children:[(0,a.jsx)(i.default,{src:r.delete_icon,alt:"",className:"w-4"}),(0,a.jsx)("p",{children:"Delete"})]})]})]})]})},b=e=>{let{expand:t,setExpand:s}=e,{openSignIn:c}=(0,x.ho)(),{user:n,chats:o,createNewChat:d}=(0,u.U)(),[h,m]=(0,l.useState)({id:0,open:!1});return(0,a.jsxs)("div",{className:"flex flex-col justify-between bg-[#212327] pt-7 transition-all z-50 max-md:absolute max-md:h-screen ".concat(t?"p-4 w-64":"md:w-20 w-0 max-md:overflow-hidden"),children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex ".concat(t?"flex-row gap-10":"flex-col items-center gap-8"),children:[(0,a.jsx)(i.default,{className:t?"w-36":"w-10",src:t?r.logo_text:r.logo_icon,alt:""}),(0,a.jsxs)("div",{onClick:()=>t?s(!1):s(!0),className:"group relative flex items-center justify-center hover:bg-gray-500/20 transition-all duration-300 h-9 w-9 aspect-square rounded-lg cursor-pointer",children:[(0,a.jsx)(i.default,{src:r.menu_icon,alt:"",className:"md:hidden"}),(0,a.jsx)(i.default,{src:t?r.sidebar_close_icon:r.sidebar_icon,alt:"",className:"hidden md:block w-7"}),(0,a.jsxs)("div",{className:"absolute w-max ".concat(t?"left-1/2 -translate-x-1/2 top-12":"-top-12 left-0"," opacity-0 group-hover:opacity-100 transition bg-black text-white text-sm px-3 py-2 rounded-lg shadow-lg pointer-events-none"),children:[t?"Close sidebar":"Open sidebar",(0,a.jsx)("div",{className:"w-3 h-3 absolute bg-black rotate-45 ".concat(t?"left-1/2 -top-1.5 -translate-x-1/2":"left-4 -bottom-1.5")})]})]})]}),(0,a.jsxs)("button",{onClick:d,className:"mt-8 flex items-center justify-center cursor-pointer ".concat(t?"bg-primary hover:opacity-90 rounded-2xl gap-2 p-2.5 w-max":"group relative h-9 w-9 mx-auto hover:bg-gray-500/30 rounded-lg"),children:[(0,a.jsx)(i.default,{className:t?"w-6":"w-7",src:t?r.chat_icon:r.chat_icon_dull,alt:""}),(0,a.jsxs)("div",{className:"absolute w-max -top-12 -right-12 opacity-0 group-hover:opacity-100 transition bg-black text-white text-sm px-3 py-2 rounded-lg shadow-lg pointer-events-none",children:["New chat",(0,a.jsx)("div",{className:"w-3 h-3 absolute bg-black rotate-45 left-4 -bottom-1.5"})]}),t&&(0,a.jsx)("p",{className:"text-white text font-medium",children:"New chat"})]}),(0,a.jsxs)("div",{className:"mt-8 text-white/25 text-sm ".concat(t?"block":"hidden"),children:[(0,a.jsx)("p",{className:"my-1",children:"Recents"}),o.map((e,t)=>(0,a.jsx)(p,{name:e.name,id:e._id,openMenu:h,setOpenMenu:m},t))]})]}),"/* ",(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center cursor-pointer group relative ".concat(t?"gap-1 text-white/80 text-sm p-2.5 border border-primary rounded-lg hover:bg-white/10 cursor-pointer":"h-10 w-10 mx-auto hover:bg-gray-500/30 rounded-lg"),children:[(0,a.jsx)(i.default,{className:t?"w-5":"w-6.5 mx-auto",src:t?r.phone_icon:r.phone_icon_dull,alt:""}),(0,a.jsx)("div",{className:"absolute -top-60 pb-8 ".concat(!t&&"-right-40"," opacity-0 group-hover:opacity-100 hidden group-hover:block transition"),children:(0,a.jsxs)("div",{className:"relative w-max bg-black text-white text-sm p-3 rounded-lg shadow-lg",children:[(0,a.jsx)("mage",{src:r.qrcode,alt:"",className:"w-44"}),(0,a.jsx)("p",{children:"Scan to get Prefect-10 App"}),(0,a.jsx)("div",{className:"w-3 h-3 absolute bg-black rotate-45 ".concat(t?"right-1/2":"left-4"," -bottom-1.5")})]})}),t&&(0,a.jsxs)(a.Fragment,{children:[" ",(0,a.jsx)("span",{children:"Get App"})," ",(0,a.jsx)(i.default,{alt:"",src:r.new_icon})," "]})]})," */",(0,a.jsxs)("div",{onClick:n?null:c,className:"flex items-center ".concat(t?" hover:bg-white/10 rounded-lg":"justify-center w-full"," gap-3 text-white/60 text-sm p-2 mt-2 cursor-pointer"),children:[n?(0,a.jsx)(x.uF,{}):(0,a.jsx)(i.default,{src:r.profile_icon,alt:"",className:"w-7"}),t&&(0,a.jsx)("span",{children:"My Profile"})]})]})]})};function f(){let[e,t]=(0,l.useState)(!1),[s,c]=(0,l.useState)([]),[n,o]=(0,l.useState)(!1),{selectedChat:d}=(0,u.U)(),m=(0,l.useRef)(null);return(0,l.useEffect)(()=>{d&&c(d.messages)},[d]),(0,l.useEffect)(()=>{m.current&&m.current.scrollTo({top:m.current.scrollHeight,behavior:"smooth"})},[s]),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex h-screen",children:[(0,a.jsx)(b,{expand:e,setExpand:t}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center px-4 pb-8 bg-[#292a2d] text-white relative",children:[(0,a.jsxs)("div",{className:"md:hidden absolute px-4 top-6 flex items-center justify-between w-full",children:[(0,a.jsx)(i.default,{onClick:()=>e?t(!1):t(!0),className:"rotate-180",src:r.menu_icon,alt:""}),(0,a.jsx)(i.default,{className:"opacity-70",src:r.chat_icon,alt:""})]}),0===s.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(i.default,{src:r.logo_icon,alt:"",className:"h-16"}),(0,a.jsx)("p",{className:"text-2xl font-medium",children:"Hi, I'm PREFECT-10."})]}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Assalamualaikum!! How can I help you today?"})]}):(0,a.jsxs)("div",{ref:m,className:"relative flex flex-col items-center justify-start w-full mt-20 max-h-screen overflow-y-auto",children:[(0,a.jsx)("p",{className:"fixed top-8 border border-transparent hover:border-gray-500/50 py-1 px-2 rounded-lg font-semibold mb-6",children:d.name}),s.map((e,t)=>(0,a.jsx)(h,{role:e.role,content:e.content},t)),n&&(0,a.jsxs)("div",{className:"flex gap-4 max-w-3xl w-full py-3",children:[(0,a.jsx)(i.default,{className:"h-9 w-9 p-1 border border-white/15 rounded-full",src:r.logo_icon,alt:"Logo"}),(0,a.jsxs)("div",{className:"loader flex justify-center items-center gap-1",children:[(0,a.jsx)("div",{className:"w-1 h-1 rounded-full bg-white animate-bounce"}),(0,a.jsx)("div",{className:"w-1 h-1 rounded-full bg-white animate-bounce"}),(0,a.jsx)("div",{className:"w-1 h-1 rounded-full bg-white animate-bounce"})]})]})]}),(0,a.jsx)(g,{isLoading:n,setIsLoading:o}),(0,a.jsx)("p",{className:"text-xs absolute bottom-1 text-gray-500",children:"AI-generated, for reference only"})]})]})})}},9111:(e,t,s)=>{"use strict";s.d(t,{AppContextProvider:()=>h,U:()=>d});var a=s(5155),r=s(4511),i=s(7471),l=s(5125),c=s(2115),n=s(2663);let o=(0,c.createContext)(),d=()=>(0,c.useContext)(o),h=e=>{let{children:t}=e,{user:s}=(0,r.Jd)(),{getToken:d}=(0,i.d)(),[h,u]=(0,c.useState)([]),[m,g]=(0,c.useState)(null),x=async()=>{try{if(!s)return null;let e=await d();await l.A.post("/api/chat/create",{},{headers:{Authorization:"Bearer ".concat(e)}}),p()}catch(e){n.Ay.error(e.message)}},p=async()=>{try{let e=await d(),{data:t}=await l.A.get("/api/chat/get",{headers:{Authorization:"Bearer ".concat(e)}});if(t.success){if(console.log(t.data),u(t.data),0===t.data.length)return await x(),p();t.data.sort((e,t)=>new Date(t.updatedAt)-new Date(e.updatedAt)),g(t.data[0]),console.log(t.data[0])}else n.Ay.error(t.message)}catch(e){n.Ay.error(e.message)}};return(0,c.useEffect)(()=>{s&&p()},[s]),(0,a.jsx)(o.Provider,{value:{user:s,chats:h,setChats:u,selectedChat:m,setSelectedChat:g,fetchUsersChats:p,createNewChat:x},children:t})}}},e=>{e.O(0,[873,211,441,255,358],()=>e(e.s=1188)),_N_E=e.O()}]);